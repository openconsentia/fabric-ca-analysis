---
title: TLS deployment
nav_order: 2
---

# Securing your deployment with TLS

Please refer to the official [User Guide][user-guide] to learn about `Fabric CA's` features.

## Securing with Openssl Certs

In this scenario, you will be using `openssl` to create secret key and certs to secure your client and server deployment. Please refer to the [docker-compose file][docker-compose] and study the points to insert your certificates and secret key.

There is also a bash script located in [./scripts/crypto.sh][crypto] which is used to get `openssl` to generate the necessary crytographic artefacts. When you run it, it will generate a folder in `./deployment/crypto`. Mount the artefacts in the settings as indicated in the [docker-compose file][docker-compose] the docker image named `server-ca`.

The `client-ca` container configuration file located in [./deployments/ca-tls-config/fabric-ca-client-config.yaml][client-home]. Go to the section mark TLS and indicate the location of the TLS certs and secret key. **NOTE:** This is relative to the `client-ca` container working directory. When you spin up the deployment, the configuration file is mounted to the container.

Please refer to the section on network operations to work with your deployment.

## Securing with Fabric TLS CA

In the [docker-compose file][docker-compose], you will find a specialised Fabric CA TLS server image `tls-ca`. When you spin up the network, the container `tls-ca` will generate the necessary crypto artefacts in these locations:

* `./deployments/fabric-tlsca-server/ca-cert.pem`

* `./deployments/fabric-tlsca-server/msp/*_sk`

If you mount the above artefacts as specified in the scenario using OpenSSL artefacts, this will secure the communications between the `client-ca` and the `server-ca`. **NOTE:** this is only to demonstrate a manual way of securing crypto artefacts generated by TLS CA. You should refer to the official [Operations Guide][ops-guide] for more advance technique securing with the TLS CA.

## Network operations

Use the following commands to work with the network:

* `./scripts/tls-scenario.sh run` to spin up a local network.

* `./scripts/tls-scenario.sh stop` to stop a running local network.

* `./scripts/tls-scenario.sh status` to view the status of the containers in your network.

* `./scripts/tls-scenario.sh clean` to remove docker containers and images from your machine. 


[user-guide]: https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html
[ops-guide]: https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/operations_guide.html

[crypto]: https://github.com/openconsentia/fabric-ca-analysis/blob/master/scripts/crypto.sh
[docker-compose]: https://github.com/openconsentia/fabric-ca-analysis/blob/master/deployments/tls-docker-compose.yaml
[client-home]: https://github.com/openconsentia/fabric-ca-analysis/blob/master/deployments/ca-tls-config/fabric-ca-client-config.yaml
[network-run]: https://github.com/openconsentia/fabric-ca-analysis/blob/master/scripts/tls-scenario.sh